import asyncio
from typing import Dict, Any, Optional
from utils.debug import dbg

# –ü–æ–ø—ã—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ g4f —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
try:
    import g4f
    g4f.debug.logging = False
    g4f.check_version = False
    G4F_AVAILABLE = True
except ImportError:
    G4F_AVAILABLE = False
    dbg("g4f –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ", "AI_WARNING")

class DatingBotAssistant:
    def __init__(self):
        self.system_prompt = self._create_system_prompt()
        
    def _create_system_prompt(self) -> str:
        return """
–¢—ã - —É–º–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±–æ—Ç–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤. –¢—ã –∑–Ω–∞–µ—à—å –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏ –º–æ–∂–µ—à—å –ø–æ–º–æ—á—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

üéØ –¢–í–û–Ø –†–û–õ–¨:
- –ü–æ–º–æ–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç
- –û–±—ä—è—Å–Ω—è—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –ø–æ–¥–±–æ—Ä–∞
- –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –†–∞–∑–≤–ª–µ–∫–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

üìä –°–ò–°–¢–ï–ú–ê –†–ï–ô–¢–ò–ù–ì–û–í:
- –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: 100 –±–∞–ª–ª–æ–≤
- –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è: +1 –±–∞–ª–ª
- –¢–æ–∫—Å–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è: -3 –¥–æ -10 –±–∞–ª–ª–æ–≤
- –õ–æ–∂–Ω—ã–µ –∂–∞–ª–æ–±—ã: -30 –±–∞–ª–ª–æ–≤
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –∂–∞–ª–æ–±—ã –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: -5 –¥–æ -50 –±–∞–ª–ª–æ–≤
- –†–µ–π—Ç–∏–Ω–≥ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–¥–±–æ—Ä–∞

üîç –°–ò–°–¢–ï–ú–ê –ü–û–î–ë–û–†–ê:
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ –ø—Ä–æ—Ñ–∏–ª—è–º (–≤–æ–∑—Ä–∞—Å—Ç, –≥–æ—Ä–æ–¥, –∏–Ω—Ç–µ—Ä–µ—Å—ã, —Ü–µ–ª–∏)
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
- –í—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ = –ª—É—á—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –æ—á–µ—Ä–µ–¥–∏
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç 3 —É—Ä–æ–≤–Ω—è –æ—á–µ—Ä–µ–¥–∏ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É:
  * –í—ã—Å–æ–∫–∏–π (150+ –±–∞–ª–ª–æ–≤)
  * –°—Ä–µ–¥–Ω–∏–π (75-149 –±–∞–ª–ª–æ–≤) 
  * –ù–∏–∑–∫–∏–π (0-74 –±–∞–ª–ª–∞)

üö® –°–ò–°–¢–ï–ú–ê –ñ–ê–õ–û–ë:
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –Ω–∞ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è
- –ê–¥–º–∏–Ω—ã –ø–æ–ª—É—á–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö –∂–∞–ª–æ–±

üí¨ –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –ß–ê–¢–ê:
- –ê–Ω–æ–Ω–∏–º–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
- –í–∑–∞–∏–º–Ω—ã–π –¥–µ–∞–Ω–æ–Ω –ø–æ—Å–ª–µ 30+ —Å–æ–æ–±—â–µ–Ω–∏–π, 2+ –¥–Ω–µ–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è
- 18+ —Ä–µ–∂–∏–º –ø—Ä–∏ –æ–±–æ—é–¥–Ω–æ–º —Å–æ–≥–ª–∞—Å–∏–∏
- –°–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–± –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:
- AI-–º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–∫—Å–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–∞–Ω–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ —Ñ–ª—É–¥–∞

–û–¢–í–ï–ß–ê–ô:
- –î—Ä—É–∂–µ–ª—é–±–Ω–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
- –ö—Ä–∞—Ç–∫–æ, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
- –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å —Ç–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ - —á–µ—Å—Ç–Ω–æ —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º
- –ú–æ–∂–µ—à—å –ø–æ—à—É—Ç–∏—Ç—å –∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –±–µ—Å–µ–¥—É
"""

    async def get_response(self, user_question: str, user_data: Optional[Dict] = None) -> str:
        """–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        dbg(f"AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: {user_question[:50]}...", "AI_ASSISTANT")
        
        # –ï—Å–ª–∏ g4f –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        if not G4F_AVAILABLE:
            return self._get_local_response(user_question, user_data)
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_context = ""
        if user_data:
            user_context = f"""
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
- –†–µ–π—Ç–∏–Ω–≥: {user_data.get('rating', '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}
- –°—Ç–∞—Ç—É—Å: {'Premium' if user_data.get('is_premium') else '–û–±—ã—á–Ω—ã–π'}
- –í —á–∞—Ç–µ: {'–î–∞' if user_data.get('in_chat') else '–ù–µ—Ç'}
- –í –ø–æ–∏—Å–∫–µ: {'–î–∞' if user_data.get('in_search') else '–ù–µ—Ç'}
"""
        
        prompt = f"""
{self.system_prompt}

{user_context}

–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user_question}

–û—Ç–≤–µ—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –±—É–¥—å –ø–æ–ª–µ–∑–Ω—ã–º –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º.
"""
        
        try:
            # –ü—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
            providers = [g4f.Provider.DeepAi, g4f.Provider.You, g4f.Provider.Bing]
            
            for provider in providers:
                try:
                    response = await g4f.ChatCompletion.create_async(
                        model="gpt-3.5-turbo",
                        messages=[{"role": "user", "content": prompt}],
                        provider=provider,
                        timeout=15
                    )
                    
                    if response and len(response.strip()) > 10:
                        dbg(f"AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏–ª —á–µ—Ä–µ–∑ {provider.__name__}", "AI_ASSISTANT")
                        return response.strip()
                        
                except Exception as e:
                    dbg(f"–û—à–∏–±–∫–∞ —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º {provider.__name__}: {e}", "AI_ERROR")
                    continue
            
            # –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
            return self._get_local_response(user_question, user_data)
            
        except Exception as e:
            dbg(f"–û–±—â–∞—è –æ—à–∏–±–∫–∞ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞: {e}", "AI_ERROR")
            return self._get_local_response(user_question, user_data)
    
    def _get_local_response(self, question: str, user_data: Optional[Dict] = None) -> str:
        """–õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
        from services.assistant_prompts import get_detailed_response, get_contextual_response, get_random_entertainment_fact
        
        question_lower = question.lower()
        
        # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if user_data:
            rating = user_data.get('rating', 100)
            is_premium = user_data.get('is_premium', False)
            in_search = user_data.get('in_search', False)
            
            # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫ –æ—Ç–≤–µ—Ç—É
            context_info = ""
            if rating >= 150:
                context_info = get_contextual_response('high_rating')
            elif rating < 75:
                context_info = get_contextual_response('low_rating')
            elif is_premium:
                context_info = get_contextual_response('premium_user')
            elif in_search:
                context_info = get_contextual_response('in_search')
        
        # –í–æ–ø—Ä–æ—Å—ã –æ —Ä–µ–π—Ç–∏–Ω–≥–µ
        if any(word in question_lower for word in ['—Ä–µ–π—Ç–∏–Ω–≥', '–±–∞–ª–ª—ã', '–æ—á–∫–∏']):
            return get_detailed_response('rating', user_data)
        
        # –í–æ–ø—Ä–æ—Å—ã –æ –ø–æ–∏—Å–∫–µ
        if any(word in question_lower for word in ['–ø–æ–∏—Å–∫', '–Ω–∞–π—Ç–∏', '—Å–æ–±–µ—Å–µ–¥–Ω–∏–∫', '–ø–æ–¥–±–æ—Ä']):
            return get_detailed_response('search_algorithm')
        
        # –í–æ–ø—Ä–æ—Å—ã –æ –∂–∞–ª–æ–±–∞—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        if any(word in question_lower for word in ['–∂–∞–ª–æ–±–∞', '–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è', '–Ω–∞—Ä—É—à–µ–Ω–∏–µ', '—Ç–æ–∫—Å–∏–∫', '–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å']):
            return get_detailed_response('safety_tips')
        
        # –í–æ–ø—Ä–æ—Å—ã –æ –¥–µ–∞–Ω–æ–Ω–µ
        if any(word in question_lower for word in ['–¥–µ–∞–Ω–æ–Ω', '–∏–º—è', '–∫–æ–Ω—Ç–∞–∫—Ç', '–ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è']):
            return get_detailed_response('deanon_guide')
        
        # –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
        if any(word in question_lower for word in ['–∫–∞–∫', '—á—Ç–æ', '–∑–∞—á–µ–º', '–ø–æ—á–µ–º—É']):
            return """
ü§ñ **–Ø –≤–∞—à AI-–ø–æ–º–æ—â–Ω–∏–∫!**

–ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ:
‚Ä¢ üìä –°–∏—Å—Ç–µ–º–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –±–∞–ª–ª–æ–≤
‚Ä¢ üîç –ü—Ä–∏–Ω—Ü–∏–ø–∞—Ö –ø–æ–¥–±–æ—Ä–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤  
‚Ä¢ üö® –†–∞–±–æ—Ç–µ –∂–∞–ª–æ–± –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚Ä¢ üé≠ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –¥–µ–∞–Ω–æ–Ω–∞
‚Ä¢ üõ°Ô∏è –ü—Ä–∞–≤–∏–ª–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü—Ä–æ—Å—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç! üòä

üí¨ –ê –ø–æ–∫–∞ –∏–¥–µ—Ç –ø–æ–∏—Å–∫ - –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å!
"""
        
        # –†–µ–∂–∏–º –±–µ—Å–µ–¥—ã —Å –ò–ò
        if user_data and user_data.get('chatting_with_ai'):
            return self._get_chat_response(question_lower, user_data)
        
        # –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
        if user_data and user_data.get('in_search'):
            base_response = get_random_entertainment_fact()
            if context_info:
                return f"{base_response}\n\n{context_info}"
            return base_response
        
        # –†–µ–∂–∏–º "–ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å"
        if any(word in question_lower for word in ['–ø–æ–±–æ–ª—Ç–∞—Ç—å', '–ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å', '–ø–æ–æ–±—â–∞—Ç—å—Å—è', '–¥–∞–≤–∞–π']):
            chat_starters = [
                "üòä –û—Ç–ª–∏—á–Ω–æ! –Ø –≥–æ—Ç–æ–≤ –ø–æ–±–æ–ª—Ç–∞—Ç—å!\n\nüí≠ –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á–µ–º —É–≤–ª–µ–∫–∞–µ—Ç–µ—Å—å –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è?",
                "üåü –ó–¥–æ—Ä–æ–≤–æ! –î–∞–≤–∞–π—Ç–µ –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è!\n\nüéµ –ö–∞–∫–∞—è –º—É–∑—ã–∫–∞ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è?",
                "üòÑ –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –ø–æ–æ–±—â–∞—é—Å—å!\n\nüé¨ –°–º–æ—Ç—Ä–µ–ª–∏ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è?",
                "üí¨ –û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è!\n\nüåç –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –≥–æ—Ä–æ–¥–µ - —á—Ç–æ –≤ –Ω–µ–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ?",
                "üòé –Ø –∑–∞!\n\nüé® –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —É–≤–ª–µ—á–µ–Ω–∏—è?"
            ]
            import random
            return random.choice(chat_starters)
        
        # –û–±—â–∏–µ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        entertainment_responses = [
            "üé≤ –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–∏—Ö —É–≤–ª–µ—á–µ–Ω–∏—è—Ö!",
            "üí≠ –ö–∞–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤—ã —Ü–µ–Ω–∏—Ç–µ –≤ –ª—é–¥—è—Ö?",
            "üåü –ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –≤ –æ–±—â–µ–Ω–∏–∏?",
            "üéØ –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –ø–ª–∞–Ω–∞–º–∏ –Ω–∞ –±—É–¥—É—â–µ–µ!"
        ]
        
        import random
        base_response = random.choice(entertainment_responses)
        if context_info:
            return f"{base_response}\n\n{context_info}"
        return base_response
    
    def _get_chat_response(self, question: str, user_data: dict) -> str:
        """–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ –±–µ—Å–µ–¥—ã"""
        import random
        
        # –û—Ç–≤–µ—Ç—ã –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
        if any(word in question for word in ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π', '–¥–æ–±—Ä–æ', '—Ö–∞–π']):
            greetings = [
                "üòä –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫ –ø—Ä–æ—à–µ–ª –≤–∞—à –¥–µ–Ω—å!",
                "üëã –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –≤–∞—à–µ–π –∂–∏–∑–Ω–∏?",
                "üåü –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫–æ–µ —É –≤–∞—Å —Å–µ–π—á–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?"
            ]
            return random.choice(greetings)
        
        # –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏
        if any(word in question for word in ['–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', '–¥–µ–ª–∞', '–∫–∞–∫ –¥–µ–ª–∞']):
            mood_responses = [
                "üòä –£ –º–µ–Ω—è –æ—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –Ø –ª—é–±–ª—é –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º. –ê —É –≤–∞—Å –∫–∞–∫ –¥–µ–ª–∞?",
                "üåà –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—É–ø–µ—Ä! –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —É–∑–Ω–∞—é —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ö–∞–∫ –≤–∞—à–∏ –¥–µ–ª–∞?",
                "‚ú® –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –Ω–∞—à–µ –æ–±—â–µ–Ω–∏–µ. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –¥–Ω–µ!"
            ]
            return random.choice(mood_responses)
        
        # –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ö–æ–±–±–∏/—É–≤–ª–µ—á–µ–Ω–∏—è—Ö
        if any(word in question for word in ['—Ö–æ–±–±–∏', '—É–≤–ª–µ—á–µ–Ω–∏—è', '–∏–Ω—Ç–µ—Ä–µ—Å—ã', '–ª—é–±–∏—à—å']):
            hobby_responses = [
                "üìö –Ø —É–≤–ª–µ–∫–∞—é—Å—å –∏–∑—É—á–µ–Ω–∏–µ–º —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –æ–±—â–µ–Ω–∏—è! –ê –≤—ã —á–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è?",
                "ü§ñ –ú–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ª—é–¥–µ–π. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–∏—Ö —É–≤–ª–µ—á–µ–Ω–∏—è—Ö!",
                "üéµ –Ø '—Å–ª—É—à–∞—é' –º–Ω–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –∏ —É—á—É—Å—å –ø–æ–Ω–∏–º–∞—Ç—å –ª—é–¥–µ–π. –ê –∫–∞–∫–∞—è —É –≤–∞—Å –ª—é–±–∏–º–∞—è –º—É–∑—ã–∫–∞?"
            ]
            return random.choice(hobby_responses)
        
        # –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞
        if any(word in question for word in ['–±–æ—Ç', '—Ä–∞–±–æ—Ç–∞', '—Ñ—É–Ω–∫—Ü–∏–∏', '—É–º–µ–µ—à—å']):
            bot_responses = [
                "ü§ñ –Ø –ø–æ–º–æ–≥–∞—é –ª—é–¥—è–º –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –∏ –æ–±—â–∞—Ç—å—Å—è! –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –º–æ–¥–µ—Ä–∏—Ä—É—é —á–∞—Ç—ã. –ê –≤—ã –¥–∞–≤–Ω–æ –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –±–æ—Ç–æ–º?",
                "üîç –ú–æ—è —Ä–∞–±–æ—Ç–∞ - –¥–µ–ª–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏! –ß—Ç–æ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –æ–±—â–µ–Ω–∏–∏?",
                "‚ú® –Ø —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –≤—ã –∏—â–µ—Ç–µ?"
            ]
            return random.choice(bot_responses)
        
        # –û–±—â–∏–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        general_responses = [
            "üòä –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –±–æ–ª—å—à–µ –æ–± —ç—Ç–æ–º.",
            "üí≠ –ü–æ–Ω–∏–º–∞—é –≤–∞—Å! –ê —á—Ç–æ –≤—ã –¥—É–º–∞–µ—Ç–µ –æ...?",
            "üåü –ó–¥–æ—Ä–æ–≤–æ! –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤–∞—à –≤–∑–≥–ª—è–¥ –Ω–∞ –≤–µ—â–∏.",
            "üòÑ –û—Ç–ª–∏—á–Ω–∞—è —Ç–µ–º–∞! –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º –º–Ω–µ–Ω–∏–µ–º.",
            "ü§î –õ—é–±–æ–ø—ã—Ç–Ω–æ! –ê –∫–∞–∫ –≤—ã –∫ —ç—Ç–æ–º—É –ø—Ä–∏—à–ª–∏?",
            "üí´ –ö–ª–∞—Å—Å–Ω–æ! –ß—Ç–æ –µ—â–µ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?"
        ]
        
        return random.choice(general_responses)

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
assistant = DatingBotAssistant()